$schema: "1.0"
name: "backend-eng"
description: "This definition is for the eShop backend engineering environment"

extends:
  imageDefinition: ContosoBaseImageDefinition

tasks:
  ### Clone the eShop repository into the Workspaces directory
  - name: git-clone
    description: Clone this repository into z:\Workspaces
    parameters:
      repositoryUrl: https://github.com/contoso-co/eshop.git
      directory: z:\workspaces
  ### Run the DSC configuration for the backend engineering environment
  - name: winget
    parameters:
      configurationFile: 'z:\workspaces\eshop\.configurations\backend-eng.dsc.yaml'
userTasks:
  - name: winget
    parameters:
      configurationFile: 'z:\workspaces\eshop\.configurations\backend-eng.postcreate.dsc.yaml'
